# Система для параллельного хранения противоречивых фрагментов информации в базе знаний
## Установка
Необходимо установить официальный драйвер MongoDB для .NET с помощью менеджера пакетов NuGet.
## Как работать
Для обращения к БД MongoDB необходимо создать экземпляр класса MongoConnection и передать в него имя хоста, порт,
имя пользователя и пароль. Подразумевается, что на хосте, к которому вы подключаетесь уже существует база данных
`medicine`. Затем нужно вызвать метод `MongoConnection.Connect()`:
```cs
MongoConnection connection = new MongoConnection("localhost", "27017", "user-name", "password");
connection.Connect();
```
Для всех классов, кроме ассоциации, работает функционал по внесению, изменению и получению соответствующих элементов.
Для ассоциации пока работает только внесение.
Для создания нового элемента, например, тега, можно вызвать его конструктор, в который нужно передать содержание тега и
экземпляр класса MongoConnection. Для сохранения изменений в БД нужно вызвать метод `Tag.Save()`:
```cs
Tag tag = new Tag("Карапузовдержись", connection);
tag.Save();
```
Также можно вызвать конструктор без параметров, а сохраняемую информацию и экземпляр `MongoConnection` указать позже:
```cs
Tag tag = new Tag();
tag.Content = "Карапузовдержись";
tag.Connection = connection;
tag.Save();
```
Для получения элементов из базы данных по id создан метод `GetById(ObjectId, MongoConnection)`:
```cs
Doctor doctor = new Doctor();
ObjectId id = new ObjectId("1234567890ab");
doctor.GetById(id, connection);
```
Также у всех элементов созданы методы `GetBy...(..., MongoConnection)`, с помощью которых можно получить элемент по его уникальному идентификатору.
Для изменения элементов в БД нужно выполнить эти изменения локально, а затем вызвать метод `Save()`.
```cs
Tag tag = new Tag();
tag.GetByContent("Карапузовдержись", connection);
tag.Content = "Карапузовмолодец";
tag.Save();
```
Имя у врача и пациента не являются уникальным идентификатором, поэтому для них в дальнейшем нужно будет заменить методы `GetByName()`.